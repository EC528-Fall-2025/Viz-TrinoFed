import{j as t}from"./jsx-runtime-BjG_zV1W.js";import{r as j}from"./index-DpTt3J-R.js";import{B as n,T as u,C as R}from"./Box-DQS1bqdX.js";import{g as N,a as A,u as L,s as q,b as I,d as W,m as C}from"./createSvgIcon-HbE4gxjg.js";import{d as M}from"./fixtures-BzLkDzPP.js";function F(r){return N("MuiDivider",r)}A("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const Q=r=>{const{absolute:e,children:i,classes:l,flexItem:p,light:s,orientation:a,textAlign:o,variant:d}=r;return W({root:["root",e&&"absolute",d,s&&"light",a==="vertical"&&"vertical",p&&"flexItem",i&&"withChildren",i&&a==="vertical"&&"withChildrenVertical",o==="right"&&a!=="vertical"&&"textAlignRight",o==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},F,l)},$=q("div",{name:"MuiDivider",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:i}=r;return[e.root,i.absolute&&e.absolute,e[i.variant],i.light&&e.light,i.orientation==="vertical"&&e.vertical,i.flexItem&&e.flexItem,i.children&&e.withChildren,i.children&&i.orientation==="vertical"&&e.withChildrenVertical,i.textAlign==="right"&&i.orientation!=="vertical"&&e.textAlignRight,i.textAlign==="left"&&i.orientation!=="vertical"&&e.textAlignLeft]}})(C(({theme:r})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(r.vars||r).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:r.alpha((r.vars||r).palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:r.spacing(2),marginRight:r.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:r.spacing(1),marginBottom:r.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(r.vars||r).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(r.vars||r).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),V=q("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(r,e)=>{const{ownerState:i}=r;return[e.wrapper,i.orientation==="vertical"&&e.wrapperVertical]}})(C(({theme:r})=>({display:"inline-block",paddingLeft:`calc(${r.spacing(1)} * 1.2)`,paddingRight:`calc(${r.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${r.spacing(1)} * 1.2)`,paddingBottom:`calc(${r.spacing(1)} * 1.2)`}}]}))),v=j.forwardRef(function(e,i){const l=L({props:e,name:"MuiDivider"}),{absolute:p=!1,children:s,className:a,orientation:o="horizontal",component:d=s||o==="vertical"?"div":"hr",flexItem:m=!1,light:f=!1,role:c=d!=="hr"?"separator":void 0,textAlign:T="center",variant:S="fullWidth",...D}=l,h={...l,absolute:p,component:d,flexItem:m,light:f,orientation:o,role:c,textAlign:T,variant:S},y=Q(h);return t.jsx($,{as:d,className:I(y.root,a),role:c,ref:i,ownerState:h,"aria-orientation":c==="separator"&&(d!=="hr"||o==="vertical")?o:void 0,...D,children:s?t.jsx(V,{className:y.wrapper,ownerState:h,children:s}):null})});v&&(v.muiSkipListHighlight=!0);function B({metrics:r}){return!r||r.length===0?null:t.jsx(n,{component:"dl",sx:{m:0,mt:1,display:"grid",gridTemplateColumns:{xs:"1fr",sm:"max-content 1fr"},columnGap:2,rowGap:.5},children:r.map((e,i)=>t.jsxs(j.Fragment,{children:[t.jsx(n,{component:"dt",sx:{fontWeight:600},children:e.label}),t.jsxs(n,{component:"dd",sx:{m:0},children:[e.kind==="meter"&&t.jsxs(n,{component:"span",sx:{display:"inline-flex",alignItems:"center",gap:1},children:[t.jsx(n,{component:"meter",min:e.min??0,max:e.max??100,value:e.value,low:e.low,high:e.high,optimum:e.optimum,"aria-label":e.label,sx:{width:160,verticalAlign:"middle"}}),t.jsx(u,{component:"span",variant:"body2",children:e.format?e.format(e.value):String(e.value)})]}),e.kind==="text"&&t.jsx(u,{component:"span",variant:"body2",children:e.value}),e.kind==="code"&&t.jsx(n,{component:"code",sx:{px:1,py:.25,borderRadius:1,bgcolor:"action.selected",fontSize:"0.85rem",display:"inline-block"},children:e.value}),e.kind==="time"&&t.jsx(n,{component:"time",dateTime:e.datetime,sx:{fontFamily:"monospace"},children:e.display??new Date(e.datetime).toLocaleString()}),e.kind==="data"&&t.jsx(n,{component:"data",value:String(e.value),sx:{fontFamily:"monospace"},children:String(e.value)})]})]},i))})}function O({status:r}){if(!r)return null;const i=(p=>{switch(p){case"queued":return{bgcolor:"#e3f2fd",color:"#1976d2"};case"failed":return{bgcolor:"#ffcdd2",color:"#d32f2f"};case"idle":return{bgcolor:"#fff9c4",color:"#f57c00"};case"ok":return{bgcolor:"#c8e6c9",color:"#388e3c"};case"finished":return{bgcolor:"#bbdefb",color:"#1976d2"};case"unknown":return{bgcolor:"#f5f5f5",color:"#616161"};default:return{bgcolor:"#f5f5f5",color:"#616161"}}})(r),l=r.charAt(0).toUpperCase()+r.slice(1);return t.jsx(R,{size:"small",label:l,sx:{fontWeight:600,position:"absolute",bottom:10,right:10,padding:0,backgroundColor:i.bgcolor,color:i.color,"& .MuiChip-label":{color:i.color,fontWeight:600}}})}function x({id:r,stage:e,title:i,connector:l,status:p,durationMs:s,rows:a,timestamp:o,metrics:d,children:m,defaultOpen:f=!1}){return t.jsx(n,{component:"li",className:"query-node-item","data-testid":`query-node-${r}`,sx:{listStyle:"none",pl:1},children:t.jsxs(n,{component:"details",className:"query-node-card",open:f,sx:{bgcolor:"background.paper",border:1,borderColor:"divider",borderRadius:2,p:1.25,"&[open]":{boxShadow:1}},children:[t.jsxs(n,{component:"summary",className:"query-node-summary",sx:{listStyle:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:1,"&::-webkit-details-marker":{display:"none"}},children:[t.jsx(n,{"aria-hidden":!0,sx:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent",mr:1,transition:"transform .15s ease","details[open] > &":{transform:"rotate(90deg)"},color:"text.secondary",borderLeftColor:"currentColor"}}),t.jsx(u,{component:"span",variant:"subtitle2",sx:{fontWeight:700},children:i??e}),l&&t.jsxs(u,{component:"span",variant:"body2",sx:{color:"text.secondary"},children:["• Connector: ",l]}),typeof a=="number"&&t.jsxs(u,{component:"span",variant:"body2",sx:{color:"text.secondary"},children:["• Rows: ",t.jsx(n,{component:"data",value:a,sx:{fontFamily:"monospace"},children:a.toLocaleString()})]}),typeof s=="number"&&t.jsxs(u,{component:"span",variant:"body2",sx:{color:"text.secondary"},children:["• Duration: ",t.jsxs(n,{component:"data",value:s,sx:{fontFamily:"monospace"},children:[s," ms"]})]}),o&&t.jsxs(u,{component:"span",variant:"body2",sx:{color:"text.secondary"},children:["• ",t.jsx(n,{component:"time",dateTime:o,children:new Date(o).toLocaleTimeString()})]}),t.jsx(n,{sx:{ml:"auto"},children:t.jsx(O,{status:p})})]}),t.jsxs(n,{className:"query-node-body",sx:{mt:1.25},children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t.jsx(u,{variant:"body2",sx:{color:"text.secondary"},children:"ID:"}),t.jsx(n,{component:"code",sx:{px:1,py:.25,borderRadius:1,bgcolor:"action.hover",fontFamily:"monospace",fontSize:"0.85rem"},children:t.jsx(n,{component:"data",value:r,children:r})})]}),t.jsx(B,{metrics:d}),m&&m.length>0&&t.jsxs(t.Fragment,{children:[t.jsx(v,{sx:{my:1.25}}),t.jsx(n,{component:"ul",className:"query-node-children",sx:{pl:2,m:0,display:"grid",gap:1,padding:1,borderLeft:c=>`2px dashed ${c.palette.divider}`},children:m.map(c=>t.jsx(x,{...c},c.id))})]})]})]})})}x.__docgenInfo={description:"",methods:[],displayName:"QueryNode",props:{id:{required:!0,tsType:{name:"string"},description:""},stage:{required:!0,tsType:{name:"string"},description:""},title:{required:!1,tsType:{name:"string"},description:""},connector:{required:!1,tsType:{name:"string"},description:""},status:{required:!1,tsType:{name:"union",raw:'"unknown" | "ok" | "idle" | "queued" | "finished" | "failed"',elements:[{name:"literal",value:'"unknown"'},{name:"literal",value:'"ok"'},{name:"literal",value:'"idle"'},{name:"literal",value:'"queued"'},{name:"literal",value:'"finished"'},{name:"literal",value:'"failed"'}]},description:""},durationMs:{required:!1,tsType:{name:"number"},description:""},rows:{required:!1,tsType:{name:"number"},description:""},timestamp:{required:!1,tsType:{name:"string"},description:""},metrics:{required:!1,tsType:{name:"Array",elements:[{name:"union",raw:"MeterMetric | TextMetric | CodeMetric | TimeMetric | DataMetric",elements:[{name:"signature",type:"object",raw:`{
  kind: "meter";
  label: string;
  value: number;
  min?: number;
  max?: number;
  low?: number;
  high?: number;
  optimum?: number;
  /** Format function for displaying value as text (e.g., "123 ms"). */
  format?: (v: number) => string;
}`,signature:{properties:[{key:"kind",value:{name:"literal",value:'"meter"',required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"number",required:!0}},{key:"min",value:{name:"number",required:!1}},{key:"max",value:{name:"number",required:!1}},{key:"low",value:{name:"number",required:!1}},{key:"high",value:{name:"number",required:!1}},{key:"optimum",value:{name:"number",required:!1}},{key:"format",value:{name:"signature",type:"function",raw:"(v: number) => string",signature:{arguments:[{type:{name:"number"},name:"v"}],return:{name:"string"}},required:!1},description:'Format function for displaying value as text (e.g., "123 ms").'}]}},{name:"signature",type:"object",raw:`{
  kind: "text";
  label: string;
  value: React.ReactNode;
}`,signature:{properties:[{key:"kind",value:{name:"literal",value:'"text"',required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!0}}]}},{name:"signature",type:"object",raw:`{
  kind: "code";
  label: string;
  value: string;
}`,signature:{properties:[{key:"kind",value:{name:"literal",value:'"code"',required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}}]}},{name:"signature",type:"object",raw:`{
  kind: "time";
  label: string;
  /** ISO datetime string */
  datetime: string;
  /** Optional human-readable display */
  display?: string;
}`,signature:{properties:[{key:"kind",value:{name:"literal",value:'"time"',required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"datetime",value:{name:"string",required:!0},description:"ISO datetime string"},{key:"display",value:{name:"string",required:!1},description:"Optional human-readable display"}]}},{name:"signature",type:"object",raw:`{
  kind: "data";
  label: string;
  value: string | number;
}`,signature:{properties:[{key:"kind",value:{name:"literal",value:'"data"',required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!0}}]}}]}],raw:"QueryMetric[]"},description:""},children:{required:!1,tsType:{name:"Array",elements:[{name:"QueryNodeData"}],raw:"QueryNodeData[]"},description:""},next:{required:!1,tsType:{name:"QueryNodeData"},description:""},defaultOpen:{required:!1,tsType:{name:"boolean"},description:"Whether the node is expanded initially",defaultValue:{value:"false",computed:!1}}}};const H={title:"Components/QueryNode",component:x,args:M,parameters:{layout:"centered"}},g={};var b,k,w;g.parameters={...g.parameters,docs:{...(b=g.parameters)==null?void 0:b.docs,source:{originalSource:"{}",...(w=(k=g.parameters)==null?void 0:k.docs)==null?void 0:w.source}}};const P=["Default"];export{g as Default,P as __namedExportsOrder,H as default};
